<app-navigation></app-navigation>
<div class="container pb-8 mx-auto px-2 lg:px-0 xl:max-w-screen-xl lg:max-w-screen-lg md:max-w-screen-md">
  <div class="flex">
    <app-back-link></app-back-link>
  </div>

  <div class="flex my-8">
    <h2 class="">All Blogs</h2>
  </div>

  <div class="flex flex-col-reverse lg:flex-row gap-2 lg:gap-6">
    <div class="w-full">
      <div class="flex justify-between mb-4 place-items-center" *ngIf="!isLoading">
        <div class="w-80">
          <app-search-blog></app-search-blog>
        </div>
        <div class="dropdown dropdown-bottom dropdown-end">
          <div tabindex="0" role="button" class="badge h-5 cursor-pointer gap-2 px-3 m-1">Sort <img src="../../../assets/right-arrow.svg" alt="" class="w-5 rotate-90"></div>
          <ul tabindex="0" class="dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-60">
            <li><a (click)="sortDateDescend()">Date Posted (Newer - Older)</a></li>
            <li><a (click)="sortDateAscend()">Date Posted (Older - Newer)</a></li>
          </ul>
        </div>
      </div>

      <div *ngIf="isLoading" class="grid grid-cols-1 lg:grid-cols-4 gap-x-3 gap-y-5">
        <div class="flex gap-4">
          <div class="skeleton h-full w-1/4"></div>
          <div class="flex flex-col gap-2 w-3/4">
            <div class="skeleton h-4 w-28"></div>
            <div class="skeleton h-4 w-full"></div>
            <div class="skeleton h-4 w-full"></div>
          </div>
        </div>
        <div class="flex gap-4 ">
          <div class="skeleton h-full w-1/4"></div>
          <div class="flex flex-col gap-2 w-3/4">
            <div class="skeleton h-4 w-28"></div>
            <div class="skeleton h-4 w-full"></div>
            <div class="skeleton h-4 w-full"></div>
          </div>
        </div>
        <div class="flex gap-4 ">
          <div class="skeleton h-full w-1/4"></div>
          <div class="flex flex-col gap-2 w-3/4">
            <div class="skeleton h-4 w-28"></div>
            <div class="skeleton h-4 w-full"></div>
            <div class="skeleton h-4 w-full"></div>
          </div>
        </div>
        <div class="flex gap-4 ">
          <div class="skeleton h-full w-1/4"></div>
          <div class="flex flex-col gap-2 w-3/4">
            <div class="skeleton h-4 w-28"></div>
            <div class="skeleton h-4 w-full"></div>
            <div class="skeleton h-4 w-full"></div>
          </div>
        </div>
        <div class="flex gap-4 ">
          <div class="skeleton h-full w-1/4"></div>
          <div class="flex flex-col gap-2 w-3/4">
            <div class="skeleton h-4 w-28"></div>
            <div class="skeleton h-4 w-full"></div>
            <div class="skeleton h-4 w-full"></div>
          </div>
        </div>
        <div class="flex gap-4 ">
          <div class="skeleton h-full w-1/4"></div>
          <div class="flex flex-col gap-2 w-3/4">
            <div class="skeleton h-4 w-28"></div>
            <div class="skeleton h-4 w-full"></div>
            <div class="skeleton h-4 w-full"></div>
          </div>
        </div>
        <div class="flex gap-4 ">
          <div class="skeleton h-full w-1/4"></div>
          <div class="flex flex-col gap-2 w-3/4">
            <div class="skeleton h-4 w-28"></div>
            <div class="skeleton h-4 w-full"></div>
            <div class="skeleton h-4 w-full"></div>
          </div>
        </div>
        <div class="flex gap-4 ">
          <div class="skeleton h-full w-1/4"></div>
          <div class="flex flex-col gap-2 w-3/4">
            <div class="skeleton h-4 w-28"></div>
            <div class="skeleton h-4 w-full"></div>
            <div class="skeleton h-4 w-full"></div>
          </div>
        </div>
      </div>

      <div *ngIf="!isLoading" class="mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-x-4 gap-y-4 mb-5">
        <a (click)="viewContent(blog)" class="blog-card flex flex-col gap-3 rounded-xl shadow-xl p-2"
          *ngFor="let blog of blogs">
          <img [src]="blog.feature_image" [alt]="blog.title"
            class="w-full h-52 object-cover object-center rounded-xl">
          <div class="blog-content flex flex-col flex-1">
            <p class="font-semibold latest-title text-lg mb-4 mt-2">{{blog.title}}</p>
            <p class="latest-content">{{blog.content}}</p>

            <div class="author shadow-sm flex place-items-center gap-4 rounded-xl bg-gray-500 bg-opacity-10 p-3 my-3">
              <img src="{{blog.author_image}}" alt="" class="w-10 h-10 object-cover rounded-full">
              <div class="author-name">
                <p class="mb-2">{{blog.author_name}} {{blog.author_surname}}</p>
                <div class="badge">{{blog.blog_date | date: 'dd, MMM YYYY'}}</div>
              </div>
            </div>
          </div>

        </a>
      </div>




      <div class="flex justify-center" *ngIf="!isLoading">
        <div class="flex gap-2 place-items-center">
          <button class="btn btn-ghost btn-xs disabled:opacity-0"(click)="onPageChange(currentPage - 1)" [disabled]="currentPage === 1"><img src="../../../assets/right-arrow.svg" alt="" class="w-5 rotate-180"></button>
          <span class="text-xs">{{ currentPage }} of {{ totalPages }}</span>
          <button class=" btn btn-ghost btn-xs" (click)="onPageChange(currentPage + 1)" [disabled]="currentPage === totalPages"><img src="../../../assets/right-arrow.svg" alt="" class="w-5"></button>
        </div>
      </div>


    </div>
    
  </div>

</div>


<div class="flex justify-center">
  <button dat class="btn lg:btn-circle border-0 w-1/4  bg-black text-white add-post fixed -bottom-2 pt-2 pb-4 lg:p-0 lg:bottom-20  lg:right-16 z-50" onclick="my_modal_5.showModal()">
    <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-6 w-6 rotate-45"
              fill="none"
              viewBox="0 0 24 24"
              stroke="#fff">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="3"
                d="M6 18L18 6M6 6l12 12" />
            </svg>
  </button>
</div>
<dialog id="my_modal_5" class="modal modal-bottom sm:modal-middle">
  <div class="modal-box lg:max-w-4xl pt-14 relative">
    <app-add-blog></app-add-blog>
    <div class="modal-action">
      <form method="dialog">
        <!-- if there is a button in form, it will close the modal -->
        <button class="btn btn-circle btn-ghost absolute top-4 right-7">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-6 w-6"
            fill="none"
            viewBox="0 0 24 24"
            stroke="#16161633">
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </form>
    </div>
  </div>
</dialog>
